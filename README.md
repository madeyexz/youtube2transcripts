# YouTube2Transcripts (with Speaker Diarization)

A Python tool that downloads YouTube videos as audio and generates detailed transcriptions with speaker diarization using Google's Gemini AI. The tool supports batch processing of multiple URLs.

## Example Result

Here's a sample transcript generated by the tool:
From this 48-minute video [Elon Musk - CEO of Tesla Motors and SpaceX | Entrepreneurship | Khan Academy](https://www.youtube.com/watch?v=vDwzmJpI4io), you can find this example at [`ExampleTranscript.md`](./ExampleTranscript.md).

```
Interviewer: Cuz who's going to launch a rocket into space? I mean that's just like

Elon Musk: Yeah. Yeah exactly. That never happens.

Elon Musk: Um Well you have to say like people I think don't stand back and say well why are are we teaching people these things and we should tell them probably why we're teaching these things. Cuz a lot of kids are just in in school kind of puzzled as to why they're there.

Interviewer: Yeah.
```
So it does transcript the video, and also identify the speaker.

## Features

- Downloads YouTube videos as MP3 audio files
- Splits long audio files into manageable chunks
- Generates detailed transcriptions with speaker identification
- Supports batch processing of multiple URLs
- Includes rate limiting and retry mechanisms
- Progress tracking with tqdm
- Concurrent processing with ThreadPoolExecutor

## Prerequisites

- Google Gemini API key, get yours [here](https://aistudio.google.com/apikey)

## Installation

1. Clone the repository:
```bash
git clone https://github.com/madeyexz/youtube2transcripts.git
cd youtube2transcripts
```

2. Install required packages:
```bash
pip install -r requirements.txt
```

3. Create a `.env` file in the project root and add your Gemini API key:
```
GEMINI_API_KEY=your_api_key_here
```

## Usage

1. Create and activate a virtual environment:
```bash
uv venv .venv && source .venv/bin/activate && uv pip install -r requirements.txt
```

2. Run the script in one of two ways:

   A. Using the GUI interface:
   ```bash
   python run.py
   ```
   This will open a graphical interface where you can paste URL and read the transcript.

   B. Using command-line interface:
   ```bash
   python youtube_transcriber.py
   ```
   When prompted, enter YouTube URLs one per line. Press Enter twice when done:
   ```
   https://youtube.com/watch?v=example1
   https://youtube.com/watch?v=example2
   [Press Enter twice to start processing]
   ```

The script will:
1. Download audio from each URL
2. Split audio into 20-minute chunks (because Gemini AI has a output token limit of 8k tokens, which is roughly 30 minutes of people talking)
3. Process each chunk through Gemini 1.5 flash
4. Generate and save transcripts in the `transcripts_better` directory

## Output

Transcripts are saved as markdown files in the `transcripts_better` directory with the following naming convention:
```
transcript_[sanitized_video_title].md
```

## Configuration

Current LLM model used is `gemini-1.5-flash`, which is the nice multi-modal model that enabled this project.

Key constants that can be modified in the script are listed below, but are not recommended to be modified, especially if you are not paying for the Gemini API.
- `CALLS_PER_SECOND`: API rate limit (default: 1.8)
- `MAX_WORKERS`: Maximum concurrent jobs (default: 2)
- `chunk_duration`: Audio chunk size in minutes (default: 20)

## Error Handling

The script includes:
- Automatic retries for failed API calls
- Rate limiting to prevent API throttling
- Comprehensive logging
- File existence checks to prevent duplicate downloads

## Contributing

Contributions are welcome! Please feel free to submit a pull request.

## Disclaimer

This tool is for educational purposes only. Please ensure you have the right to download and process any YouTube content before using this tool.


